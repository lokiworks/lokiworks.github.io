<!doctype html>
<html lang="en">
<head>
<meta charset="UTF-8">
<meta name="viewport" content="width=device-width,initial-scale=1">
<meta name="generator" content="Docusaurus v2.0.0-alpha.68">
<title data-react-helmet="true">è½¯ä»¶è®¾è®¡ | Loki</title><meta data-react-helmet="true" property="og:title" content="è½¯ä»¶è®¾è®¡ | Loki"><meta data-react-helmet="true" name="description" content="è½¯ä»¶è®¾è®¡"><meta data-react-helmet="true" property="og:description" content="è½¯ä»¶è®¾è®¡"><meta data-react-helmet="true" name="twitter:card" content="summary_large_image"><meta data-react-helmet="true" name="docusaurus_language" content="en"><meta data-react-helmet="true" name="docusaurus_tag" content="default"><link data-react-helmet="true" rel="shortcut icon" href="/img/favicon.ico"><link rel="stylesheet" href="/styles.e97ef627.css">
<link rel="preload" href="/styles.57bf6eaa.js" as="script">
<link rel="preload" href="/runtime~main.c34a3491.js" as="script">
<link rel="preload" href="/main.a8d330d9.js" as="script">
<link rel="preload" href="/common.fa44d2ed.js" as="script">
<link rel="preload" href="/23.fac490eb.js" as="script">
<link rel="preload" href="/ccc0114c.33b26800.js" as="script">
<link rel="preload" href="/9849eb26.05ef0f7f.js" as="script">
</head>
<body>
<script>!function(){function t(t){document.documentElement.setAttribute("data-theme",t)}var e=function(){var t=null;try{t=localStorage.getItem("theme")}catch(t){}return t}();t(null!==e?e:"light")}()</script><div id="__docusaurus">
<nav aria-label="Skip navigation links"><button type="button" tabindex="0" class="skipToContent_2AhQ">Skip to main content</button></nav><nav class="navbar navbar--fixed-top"><div class="navbar__inner"><div class="navbar__items"><div aria-label="Navigation bar toggle" class="navbar__toggle" role="button" tabindex="0"><svg xmlns="http://www.w3.org/2000/svg" width="30" height="30" viewBox="0 0 30 30" role="img" focusable="false"><title>Menu</title><path stroke="currentColor" stroke-linecap="round" stroke-miterlimit="10" stroke-width="2" d="M4 7h22M4 15h22M4 23h22"></path></svg></div><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="My Site Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Loki</strong></a><a class="navbar__item navbar__link" href="/docs/doc1">Docs</a><a aria-current="page" class="navbar__item navbar__link navbar__link--active" href="/blog">Blog</a></div><div class="navbar__items navbar__items--right"><a href="https://github.com/lokiworks/lokiworks.github.io" target="_blank" rel="noopener noreferrer" class="navbar__item navbar__link">GitHub</a><div class="react-toggle react-toggle--disabled displayOnlyInLargeViewport_2aTZ"><div class="react-toggle-track"><div class="react-toggle-track-check"><span class="toggle_BsTx">ğŸŒœ</span></div><div class="react-toggle-track-x"><span class="toggle_BsTx">ğŸŒ</span></div></div><div class="react-toggle-thumb"></div><input type="checkbox" disabled="" aria-label="Dark mode toggle" class="react-toggle-screenreader-only"></div></div></div><div role="presentation" class="navbar-sidebar__backdrop"></div><div class="navbar-sidebar"><div class="navbar-sidebar__brand"><a class="navbar__brand" href="/"><img src="/img/logo.svg" alt="My Site Logo" class="themedImage_2E_h themedImage--light_AouX navbar__logo"><img alt="My Site Logo" class="themedImage_2E_h themedImage--dark_1YPN navbar__logo"><strong class="navbar__title">Loki</strong></a></div><div class="navbar-sidebar__items"><div class="menu"><ul class="menu__list"><li class="menu__list-item"><a class="menu__link" href="/docs/doc1">Docs</a></li><li class="menu__list-item"><a aria-current="page" class="menu__link navbar__link--active" href="/blog">Blog</a></li><li class="menu__list-item"><a href="https://github.com/lokiworks/lokiworks.github.io" target="_blank" rel="noopener noreferrer" class="menu__link">GitHub</a></li></ul></div></div></div></nav><div class="main-wrapper blog-wrapper"><div class="container margin-vert--lg"><div class="row"><div class="col col--2"><div class="sidebar_3I7I thin-scrollbar"><h3 class="sidebarItemTitle_2Dv3">Recent posts</h3><ul class="sidebarItemList_1RlG"><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/database-version-management">å·¥ç¨‹å®è·µä¹‹æ•°æ®åº“è„šæœ¬ç‰ˆæœ¬ç®¡ç†</a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/how-to-read-sourcecode">å¦‚ä½•é˜…è¯»æºç </a></li><li class="sidebarItem_Hxgp"><a class="sidebarItemLink_3ppv" href="/blog/build-monorepo">æ„å»ºå•ä½“ä»“åº“</a></li><li class="sidebarItem_Hxgp"><a aria-current="page" class="sidebarItemLink_3ppv sidebarItemLinkActive_3XUi" href="/blog/software-design">è½¯ä»¶è®¾è®¡</a></li></ul></div></div><main class="col col--8"><article><header><h1 class="margin-bottom--sm blogPostTitle_1mse">è½¯ä»¶è®¾è®¡</h1><div class="margin-vert--md"><time datetime="2020-05-09T00:00:00.000Z" class="blogPostDate_3bQP">May 9, 2020  Â· 3 min read</time></div><div class="avatar margin-vert--md"><a class="avatar__photo-link avatar__photo" href="https://lokiworks.github.io" target="_blank" rel="noreferrer noopener"><img src="https://avatars1.githubusercontent.com/u/16199375?v=4" alt="Loki"></a><div class="avatar__intro"><h4 class="avatar__name"><a href="https://lokiworks.github.io" target="_blank" rel="noreferrer noopener">Loki</a></h4><small class="avatar__subtitle">SE</small></div></div></header><section class="markdown"><h1><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="è½¯ä»¶è®¾è®¡"></a>è½¯ä»¶è®¾è®¡<a aria-hidden="true" class="hash-link" href="#è½¯ä»¶è®¾è®¡" title="Direct link to heading">#</a></h1><p>æœ¬æ¥æ˜¯æƒ³å†™ç¯‡è½¯ä»¶åˆ†å±‚çš„æ–‡ç« ï¼Œæƒ³æƒ³ä»‹ç»çš„å†…å®¹ä¸å•å•æ˜¯è¦é˜è¿°è½¯ä»¶åˆ†å±‚çš„æ€æƒ³ã€‚ä¸‹é¢ä»¥ä¸€ä¸ªå…·ä½“çš„ä¾‹å­è¿›å…¥ä¸»é¢˜</p><h2><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="éª¨æ¶å·¥ç¨‹"></a>éª¨æ¶å·¥ç¨‹<a aria-hidden="true" class="hash-link" href="#éª¨æ¶å·¥ç¨‹" title="Direct link to heading">#</a></h2><p>éª¨æ¶å·¥ç¨‹çš„ç›®çš„æ˜¯å°†è½¯ä»¶å¼€å‘è¿‡ç¨‹ä¸­çš„æœ€ä½³å®è·µã€å¯é‡ç”¨çš„ä»£ç å¼•å…¥åˆ°æ¡†æ¶ä¸­ï¼Œå½¢æˆä¸€å¥—æ ‡å‡†ã€‚æ–¹ä¾¿ä»–äººèƒ½å¤Ÿå¿«é€Ÿçš„èå…¥åˆ°å›¢é˜Ÿçš„å¼€å‘è§„èŒƒä¸­ï¼Œæ›´å¿«ã€æ›´æœ‰æ•ˆçš„å¼€å‘ä»£ç ï¼Œå°†ç²¾åŠ›éƒ½é›†ä¸­åœ¨ä¸šåŠ¡åœºæ™¯ä¸‹çš„ä»£ç é€»è¾‘ä¸Šï¼Œé¿å…äº†ä¸å¿…è¦çš„åˆ†å¿ƒã€‚</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="åè¯è§£é‡Š"></a>åè¯è§£é‡Š<a aria-hidden="true" class="hash-link" href="#åè¯è§£é‡Š" title="Direct link to heading">#</a></h3><table><thead><tr><th>æœ¯è¯­</th><th>å…¨ç§°</th><th>è¯´æ˜</th></tr></thead><tbody><tr><td>DTO</td><td>Data Trafer Object</td><td></td></tr><tr><td>DAO</td><td>Data Access Object</td><td></td></tr><tr><td>DO</td><td>Domain Object</td><td></td></tr><tr><td>app</td><td>application</td><td></td></tr><tr><td>intgr</td><td>integration</td><td></td></tr><tr><td>vo</td><td>value object</td><td></td></tr></tbody></table><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ç›®å½•ç»“æ„"></a>ç›®å½•ç»“æ„<a aria-hidden="true" class="hash-link" href="#ç›®å½•ç»“æ„" title="Direct link to heading">#</a></h3><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ arch-app       # åŒ…å«äº†ä¸€ç³»åˆ—@RestController</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ arch-domain    # åŒ…å«äº†ä¸€ç³»åˆ—@Serviceå’Œ@Componentå’ŒDOå®ä½“æ¨¡å‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ arch-dal       # åŒ…å«äº†ä¸€ç³»åˆ—@Mapperå’ŒDAOå®ä½“æ¨¡å‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ arch-intgr     # åŒ…å«äº†ä¸€ç³»åˆ—å…¶ä»–ä¸šåŠ¡çš„xxx-clientåŠç¬¬ä¸‰æ–¹å¹³å°sdkçš„å°è£…</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ arch-util      # åŒ…å«äº†ä¸€ç³»åˆ—XXXUtilså·¥å…·ç±»</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€â”€ arch-api       # åŒ…å«äº†å‡ºå…¥å‚çš„DTOå®ä½“æ¨¡å‹ä»¥åŠAPIæ¥å£</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€â”€ arch-client    # åŒ…å«äº†ä¸€ç³»åˆ—@FeignClient</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ç»“æ„å›¾"></a>ç»“æ„å›¾<a aria-hidden="true" class="hash-link" href="#ç»“æ„å›¾" title="Direct link to heading">#</a></h3><p><img alt="software-design" src="/assets/images/software-multitier-ba52251c924e9732a6ecf4a7bcfb2d2d.jpg">
æ‰“åŒ…æ—¶ä¼šå°†<strong>arch-api</strong>åŠ<strong>arch-client</strong>éƒ¨ç½²åˆ°ç§æœä¸­ï¼Œä¾›å…¶ä»–ä¸šåŠ¡ä½¿ç”¨æ–¹ä½¿ç”¨</p><ul><li><strong>arch-app</strong> å¼•ç”¨äº†arch-apiã€arch-domainã€arch-intgrï¼Œæ‰€æœ‰çš„@RestControlleréƒ½å®ç°äº†arch-apiå®šä¹‰çš„æ¥å£</li><li><strong>arch-domain</strong> å¼•ç”¨äº†arch-dalå’Œarch-util</li><li><strong>arch-client</strong> å¼•ç”¨äº†arch-api</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ä¼˜åŒ–ç‰ˆæœ¬v1"></a>ä¼˜åŒ–ç‰ˆæœ¬V1<a aria-hidden="true" class="hash-link" href="#ä¼˜åŒ–ç‰ˆæœ¬v1" title="Direct link to heading">#</a></h3><ol><li><p>arch-domainå¦‚ä½•ä½¿ç”¨arch-apiä¸­çš„å®ä½“æ¨¡å‹?</p><p>å¯ä»¥ä»arch-apiä¸­åˆ†ç¦»å‡ºarch-api-beanï¼Œ arch-domainå¼•ç”¨arch-api-bean</p></li><li><p>arch-domainå¦‚ä½•ä½¿ç”¨arch-appä¸­çš„å®ä½“æ¨¡å‹?</p><p>arch-appå¼•ç”¨äº†arch-apiï¼Œç†è®ºä¸Šä¸ä¼šéœ€è¦è‡ªå®šä¹‰å®ä½“ã€‚å®é™…æ“ä½œæ—¶å¹¶ä¸éœ€è¦æŠŠæ‰€æœ‰çš„æ¥å£éƒ½æš´éœ²ç»™ä¸šåŠ¡ä½¿ç”¨æ–¹ï¼Œåªæš´éœ²ä¸šåŠ¡ä½¿ç”¨æ–¹éœ€è¦çš„æ¥å£ï¼Œæ‰€ä»¥arch-appä¸­ä¼šå­˜åœ¨å®ä½“æ¨¡å‹ã€‚
å¯ä»¥ä»arch-appä¸­åˆ†ç¦»å‡ºarch-app-beanï¼Œarch-domainå¼•ç”¨arch-app-bean</p></li><li><p>arch-clientä¸­å¦‚ä½•æä¾›æ‰©å±•ç‚¹ç»™ä¸šåŠ¡ä½¿ç”¨æ–¹åšä¸šåŠ¡é™çº§?
é€šè¿‡Springæä¾›çš„ApplicationContextè·å–ä¸šåŠ¡ä½¿ç”¨æ–¹è‡ªå®šä¹‰çš„é™çº§å¯¹è±¡</p></li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-java codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@FeignClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;xxx&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> path </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;api/v1/xxx&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> fallbackFactory </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">XXXClientFallbackFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token keyword" style="font-style:italic">class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">interface</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IXXXClient</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IXXXApi</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@RequestMapping</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;xxxAction&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> method </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">RequestMethod</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">GET</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">DemoRespDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">xxxAction</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@RequestParam</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">value </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token string" style="color:rgb(195, 232, 141)">&quot;name&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> name</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Component</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">XXXClientFallbackFactory</span><span class="token plain">  </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">AbstractFallbackFactory</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">IXXXClient</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Value</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;${xxx.xxxClientExtend}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> xxxClientExtend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Autowired</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">ApplicationContext</span><span class="token plain"> appContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">IXXXClientClient</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createCustomObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">appContext </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">StringUtils</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">isNotBlank</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">xxxClientExtend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain">  </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">IXXXClientClient</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> appContext</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getBean</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">xxxClientExtend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Slf4j</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">abstract</span><span class="token plain">  </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">AbstractFallbackFactory</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FallbackFactory</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">abstract</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createCustomObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@SuppressWarnings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;unchecked&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Throwable</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> obj </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">createCustomObject</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">obj </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> obj</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Proxy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">newProxyInstance</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token function" style="color:rgb(130, 170, 255)">getEntityClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getClassLoader</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">                </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getEntityClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FeignExceptionHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Class</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getEntityClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">Class</span><span class="token plain"> clazz </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">getClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">Type</span><span class="token plain"> type </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> clazz</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getGenericSuperclass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">ParameterizedType</span><span class="token plain"> p </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ParameterizedType</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain">type</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Class</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> p</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getActualTypeArguments</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FeignExceptionHandler</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">InvocationHandler</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Throwable</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token class-name" style="color:rgb(255, 203, 107)">FeignExceptionHandler</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Throwable</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">cause </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">invoke</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token plain"> proxy</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Method</span><span class="token plain"> method</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Object</span><span class="token punctuation" style="color:rgb(199, 146, 234)">[</span><span class="token punctuation" style="color:rgb(199, 146, 234)">]</span><span class="token plain"> args</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">error</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;invoke failed, error message:{}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">failure</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">FAILED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p><strong>Tips:</strong> </p><ul><li>ä¼˜åŒ–ç‰ˆæœ¬V1 åœ¨åŸæ¥çš„åŸºç¡€ä¸Šå¤šå¢åŠ äº†ä¸¤å±‚ç»“æ„ï¼šarch-api-beanå’Œarch-app-beanï¼Œä½¿å¾—éª¨æ¶æ˜¾å¾—è‡ƒè‚¿ã€‚èƒ½ä¸èƒ½æŠ½å–å‡ºarch-beanï¼Œç”¨äºæ”¾ç½®å„ç§ç±»å‹çš„beanï¼Ÿ</li><li>åˆ›å»ºæ‰©å±•ç‚¹å¯¹è±¡æ˜¯arch-clientçš„èŒè´£å—ï¼Ÿ</li></ul><p>è¿™ä¸¤ä¸ªé—®é¢˜ç•™ç»™è¯»è€…æ€è€ƒï¼Œå¦‚æœ‰ç–‘é—®è¯·é€šè¿‡æ–‡æœ«çš„<a href="#%E8%81%94%E7%B3%BB%E6%96%B9%E5%BC%8F">è”ç³»æ–¹å¼</a>ä¸æˆ‘æ²Ÿé€š</p></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ä¼˜åŒ–ç‰ˆæœ¬v2"></a>ä¼˜åŒ–ç‰ˆæœ¬V2<a aria-hidden="true" class="hash-link" href="#ä¼˜åŒ–ç‰ˆæœ¬v2" title="Direct link to heading">#</a></h3><ol><li>è°ƒæ•´æ¨¡å‹çš„ä¾èµ–ç»“æ„ï¼Œä¼˜åŒ–<a href="#%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACv1">ä¼˜åŒ–ç‰ˆæœ¬V1</a>ä¸­çš„ä¼˜åŒ–ç‚¹1ã€2ï¼Œè°ƒæ•´åçš„ç»“æ„è§ä¸‹å›¾
<img alt="software-design" src="/assets/images/software-multitier-inner-structure-84cc0e6a98988e14db6a3fec55e0f989.jpg"></li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-undefined codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€arch-app</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€arch-domain</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â”œâ”€model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â”‚  â”œâ”€converter # ç”¨äºå­˜æ”¾å®ä½“æ¨¡å‹è½¬æ¢</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â”‚  â”œâ”€do        # é¢†åŸŸå®ä½“æ¨¡å‹ï¼Œæä¾›æœ¬é¢†åŸŸå†…ä¸šåŠ¡çš„æ–¹æ³•</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â”‚  â””â”€vo        # å€¼å®ä½“æ¨¡å‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â””â”€service      # è½»serviceï¼Œå†…éƒ¨è°ƒç”¨doå¯¹è±¡åŠrepoå®Œæˆä¸šåŠ¡é€»è¾‘</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚      â””â”€facade   # å°è£…å¤šä¸ªserviceçš„å¤æ‚æ“ä½œ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€arch-dal</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â”œâ”€model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â””â”€repo         # å°è£…æ•°æ®è®¿é—®å±‚çš„å¢åˆ æ”¹æŸ¥çš„æ“ä½œ</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€arch-intgr</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â”œâ”€facade       # ç¬¬ä¸‰æ–¹æ¥å£å‡ºå…¥å‚é€‚é…å±‚</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â””â”€model        # ç”¨äºå­˜æ”¾ç¬¬ä¸‰æ–¹å®ä½“æ¨¡å‹</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€arch-utils</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”œâ”€arch-api</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â”‚  â””â”€model</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">â””â”€arch-client</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p><strong>Tips:</strong></p><ul><li>arch-appä¸­@RestControllerä¸‹çš„æ¥å£å®ç°arch-apiåŒ…ä¸‹çš„APIæ¥å£ã€‚</li><li>arch-domainä¸­serviceåŒ…ä¸‹çš„æ¥å£ç»§æ‰¿è‡ªarch-apiåŒ…ä¸‹çš„APIæ¥å£ã€‚ä¸ºä»€ä¹ˆè¦ç»§æ‰¿APIæ¥å£ï¼Ÿè¿™ä¸ªé—®é¢˜ç•™ç»™è¯»è€…æ€è€ƒï¼Œå¦‚æœ‰ç–‘é—®è¯·é€šè¿‡æ–‡æœ«çš„<a href="#%E8%81%94%E7%B3%BB%E6%96%B9%E5%BC%8F">è”ç³»æ–¹å¼</a>ä¸æˆ‘æ²Ÿé€š</li><li>arch-apiæ¥å£æ–¹æ³•ä¸­åŠ å…¥@RequestMappingã€@RequestBodyã€@RequestParamï¼Œé¿å…arch-clientå’Œarch-appåšç›¸åŒçš„æ“ä½œ</li><li>arch-utilæ”¾åœ¨æ€»çš„pomä¸­ï¼Œæ¨ªè·¨arch-dalã€arch-intgrã€arch-domainã€arch-app</li></ul></blockquote><ol><li>è°ƒæ•´arch-clientä¸­æ‰©å±•ç‚¹çš„ä»£ç ï¼Œä¼˜åŒ–<a href="#%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACv1">ä¼˜åŒ–ç‰ˆæœ¬V1</a>ä¸­çš„ä¼˜åŒ–ç‚¹3ï¼Œè°ƒæ•´åçš„ä»£ç å¦‚ä¸‹</li></ol><div class="mdxCodeBlock_1XEh"><div class="codeBlockContent_1u-d"><div tabindex="0" class="prism-code language-java codeBlock_3iAC thin-scrollbar"><div class="codeBlockLines_b7E3" style="color:#bfc7d5;background-color:#292d3e"><div class="token-line" style="color:#bfc7d5"><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Component</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">XXXClientFallbackFactory</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">extends</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">GenericFallbackFactory</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">IXXXApi</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">XXXClientFallbackFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">XXXClientFallbackFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">IXXXApi</span><span class="token plain"> xxxApi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="font-style:italic">super</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">xxxApi</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Slf4j</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain">  </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">GenericFallbackFactory</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">FallbackFactory</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">GenericFallbackFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">GenericFallbackFactory</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> extend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token keyword" style="font-style:italic">this</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">extend </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> extend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">protected</span><span class="token plain">   </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> extend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@Override</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token annotation punctuation" style="color:rgb(199, 146, 234)">@SuppressWarnings</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;unchecked&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">create</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">Throwable</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">trace</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;fallback due to:{}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> cause</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">if</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">extend </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">            log</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">debug</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token string" style="color:rgb(195, 232, 141)">&quot;switch to extend fallback:{}&quot;</span><span class="token punctuation" style="color:rgb(199, 146, 234)">,</span><span class="token plain"> extend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getClass</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getName</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> extend</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">class</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">implements</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">Serializable</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">private</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">long</span><span class="token plain"> serialVersionUID </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">-</span><span class="token number" style="color:rgb(247, 140, 108)">8567541939288898127L</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token plain"> SUCCEED </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">SUCCEED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">final</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token plain"> FAILED </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">new</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">FAILED</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">successAndDataNotNull</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">success</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token plain">resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">&amp;&amp;</span><span class="token plain"> resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token plain">data </span><span class="token operator" style="color:rgb(137, 221, 255)">!=</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">success</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> resp </span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">null</span><span class="token plain"> </span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain"> </span><span class="token boolean" style="color:rgb(255, 88, 116)">false</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain">resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">succeed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">static</span><span class="token plain"> </span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">safeWrap</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&lt;</span><span class="token generics class-name" style="color:rgb(255, 203, 107)">T</span><span class="token generics punctuation" style="color:rgb(199, 146, 234)">&gt;</span><span class="token plain"> resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> resp</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token keyword" style="font-style:italic">null</span><span class="token operator" style="color:rgb(137, 221, 255)">?</span><span class="token plain">FAILED</span><span class="token operator" style="color:rgb(137, 221, 255)">:</span><span class="token plain"> resp</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">T</span><span class="token plain"> data</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">String</span><span class="token plain"> message</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token class-name" style="color:rgb(255, 203, 107)">Integer</span><span class="token plain"> errCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token keyword" style="font-style:italic">boolean</span><span class="token plain"> </span><span class="token function" style="color:rgb(130, 170, 255)">succeed</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token plain"> </span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        </span><span class="token keyword" style="font-style:italic">return</span><span class="token plain"> errCode</span><span class="token operator" style="color:rgb(137, 221, 255)">==</span><span class="token number" style="color:rgb(247, 140, 108)">0</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token keyword" style="font-style:italic">public</span><span class="token plain"> </span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseEntityDTO</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token class-name" style="color:rgb(255, 203, 107)">ResponseCode</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">{</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        message </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getMessage</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">        errCode </span><span class="token operator" style="color:rgb(137, 221, 255)">=</span><span class="token plain"> code</span><span class="token punctuation" style="color:rgb(199, 146, 234)">.</span><span class="token function" style="color:rgb(130, 170, 255)">getCode</span><span class="token punctuation" style="color:rgb(199, 146, 234)">(</span><span class="token punctuation" style="color:rgb(199, 146, 234)">)</span><span class="token punctuation" style="color:rgb(199, 146, 234)">;</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain">    </span><span class="token comment" style="color:rgb(105, 112, 152);font-style:italic">// æ­¤å¤„çœç•¥å…¶ä»–ä»£ç </span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain"></span><span class="token punctuation" style="color:rgb(199, 146, 234)">}</span><span class="token plain"></span></div><div class="token-line" style="color:#bfc7d5"><span class="token plain" style="display:inline-block">
</span></div></div></div><button type="button" aria-label="Copy code to clipboard" class="copyButton_10dd">Copy</button></div></div><blockquote><p><strong>Tips:</strong></p><ul><li>å°†åˆ›å»ºæ‹“å±•ç‚¹çš„ä»»åŠ¡äº¤ç»™ä¸šåŠ¡ä½¿ç”¨æ–¹ï¼Œä¸šåŠ¡ä½¿ç”¨æ–¹ä½¿ç”¨@Beanå‘ŠçŸ¥Springå¦‚ä½•æ„å»ºå¯¹è±¡ï¼Œå¹¶å°†æ‹“å±•çš„xxxApiä¼ å…¥åˆ°XXXClientFallbackFactoryå¯¹è±¡ä¸­</li><li>å®ç°FallbackFactoryæ¥å£çš„ç›®çš„åªæ˜¯ä¸ºäº†çŸ¥æ™“è¯·æ±‚å¤±è´¥çš„åŸå› ï¼Œæ¯”å¦‚ï¼šæœåŠ¡downæœºã€ç½‘ç»œè¶…æ—¶ç­‰ï¼Œæ‰€ä»¥GenericFallbackFactoryä¸­åªè¦è®°å½•ä¸‹æ—¥å¿—å°±å¯ä»¥äº†</li><li>å½“ä¸šåŠ¡ä½¿ç”¨æ–¹æä¾›äº†æ‹“å±•ç‚¹ï¼Œåˆ™ä½¿ç”¨ä¸šåŠ¡æ–¹æä¾›çš„æ‹“å±•ç‚¹ï¼Œå¦åˆ™ä¸ä¼šåšä»»ä½•å¤„ç†ã€‚ä¸ºä»€ä¹ˆä¸åœ¨GenericFallbackFactoryä¸­æ„é€ æ–°çš„å¯¹è±¡ä»è€Œåœ¨æ–¹æ³•ä¸­è¿”å›é»˜è®¤çš„è¿”å›ä½“ï¼Ÿè¿™ä¸ªé—®é¢˜ç•™ç»™è¯»è€…æ€è€ƒï¼Œå¦‚æœ‰ç–‘é—®è¯·é€šè¿‡æ–‡æœ«çš„<a href="#%E8%81%94%E7%B3%BB%E6%96%B9%E5%BC%8F">è”ç³»æ–¹å¼</a>ä¸æˆ‘æ²Ÿé€š</li><li>é€šè¿‡ResponseEntityDTOä¸­çš„successã€successAndDataNotNullå¯¹arch-clientè¿”å›ä½“åšæ ¡éªŒï¼ŒsafeWrapç”¨äºarch-appå±‚ï¼ŒåŒ…è£…arch-domainå±‚çš„è¿”å›ä½“</li></ul></blockquote><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ä¼˜åŒ–ç‰ˆæœ¬v3"></a>ä¼˜åŒ–ç‰ˆæœ¬V3<a aria-hidden="true" class="hash-link" href="#ä¼˜åŒ–ç‰ˆæœ¬v3" title="Direct link to heading">#</a></h3><ul><li>ç›®å‰çš„éª¨æ¶éƒ½æ˜¯é€šè¿‡å†™å¥½çš„æ¨¡æ¿ï¼Œæä¾›å‡ºå»ã€‚å¯ä»¥é€šè¿‡ä¸€ç§è‡ªç”±çš„æ–¹å¼è®©ç”¨æˆ·å»é€‰æ‹©æƒ³è¦ç”Ÿæˆçš„éª¨æ¶åŠä½¿ç”¨çš„ç»„ä»¶ç­‰ã€‚è¯»è€…å¯ä»¥å‚è€ƒ<a href="https://start.aliyun.com/" target="_blank" rel="noopener noreferrer">Aliyun Java Initializer</a>çš„å®ç°</li><li>é’ˆå¯¹ä¸åŒçš„ä¸šåŠ¡æä¾›ä¸åŒçš„éª¨æ¶</li><li><a href="#%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACv2">ä¼˜åŒ–ç‰ˆæœ¬V2</a>çš„æ–¹å¼èƒ½å¤Ÿæ»¡è¶³å•ä¸€æŠ€æœ¯æ ˆçš„è¯‰æ±‚ï¼Œä½†æ˜¯å¯¹äºå¤šæŠ€æœ¯æ ˆæ˜¾å¾—æ— åŠ›ã€‚<a href="#%E4%BC%98%E5%8C%96%E7%89%88%E6%9C%ACv2">ä¼˜åŒ–ç‰ˆæœ¬V2</a>çš„æ–¹å¼æœ¬è´¨ä¸Šè¿˜æ˜¯åŸºäºå¥‘çº¦ç¼–ç¨‹ã€‚å¯ä»¥ä»æ–‡æ¡£å¥‘çº¦ä¸Šå»æ€è€ƒï¼Œ
å®šä¹‰æ¥å£æ— éæ˜¯å®šä¹‰å¥½æ¥å£çš„å‡ºå…¥å‚ä»¥åŠæ–¹æ³•åã€‚è¿™å—å¯ä»¥åŸºäº<a href="https://www.openapis.org/" target="_blank" rel="noopener noreferrer">openapi</a>å»åšï¼Œå½“æ¥å£å®šä¹‰å®Œæ¯•å¯å‘å¸ƒæ—¶ã€‚æ¥å£çš„ä½¿ç”¨æ–¹ï¼Œå¯ä»¥åœ¨æ¥å£æ–‡æ¡£çš„å¹³å°ä¸­ç”Ÿæˆå„è‡ªæŠ€æœ¯æ ˆçš„åŸºäºå½“å‰æ–‡æ¡£åº“ç‰ˆæœ¬å·å¯¹åº”çš„åº“ï¼Œå†ç»†åŒ–çš„å¯ä»¥ç”Ÿæˆå½“å‰æŠ€æœ¯æ ˆä½¿ç”¨çš„æ¡†æ¶(spring cloudã€dubboã€grpcç­‰)å¯¹åº”çš„åº“(libã€dllã€jarç­‰)</li><li>å¾€å¾€è§„èŒƒçš„å‡ºå‘ç‚¹éƒ½æ˜¯å¥½çš„ï¼Œå¦‚ä½•ä¿è¯ä½¿ç”¨éª¨æ¶çš„äººæŒ‰ç…§è§„èŒƒå»æ‰§è¡Œï¼Ÿå¯ä»¥é€šè¿‡æä¾›å„ç§ide(vscodeã€ideaç­‰)æ’ä»¶ï¼Œå»æç¤ºç”¨æˆ·ã€‚å³ä½¿æç¤ºäº†ï¼Œç”¨æˆ·è¿˜æ˜¯æ²¡æœ‰æ‰§è¡Œã€‚è¿™æ—¶å¯ä»¥é€šè¿‡éª¨æ¶è´¨æ£€å¹³å°ï¼Œæ‰«ææ¥å…¥éª¨æ¶çš„ä¸šåŠ¡ä»£ç åº“ï¼Œå®šæœŸåšè´¨æ£€åˆ†æã€‚è¿™å—å¯ä»¥åŸºäº<a href="https://www.archunit.org/" target="_blank" rel="noopener noreferrer">archunit</a>å»åš</li><li>æ­¤å¤„ç•™ç»™è¯»è€…æ€è€ƒï¼Œå¦‚æœä½ æœ‰å…¶ä»–å¥½çš„æƒ³æ³•ï¼Œè¯·é€šè¿‡æ–‡æœ«çš„<a href="#%E8%81%94%E7%B3%BB%E6%96%B9%E5%BC%8F">è”ç³»æ–¹å¼</a>ä¸æˆ‘æ²Ÿé€š</li></ul><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="ç»“è¯­"></a>ç»“è¯­<a aria-hidden="true" class="hash-link" href="#ç»“è¯­" title="Direct link to heading">#</a></h3><blockquote><ul><li>ä¸æ–­çš„ä¼˜åŒ–è®¾è®¡ï¼Œæ˜¯ä¸ºäº†ä½¿ç”¨çš„äººèƒ½å¤Ÿæ›´é«˜æ•ˆå¹¶å¿«ä¹çš„å·¥ä½œ</li><li>æ‰€æœ‰çš„è½¯ä»¶è®¾è®¡å¹¶ä¸æ˜¯ä¸€è¹´è€Œå°±çš„</li><li>è½¯ä»¶æ˜¯è¦åˆ†å±‚çš„ï¼Œä½†ä¹Ÿè¦æ³¨æ„ç²’åº¦ã€‚æ¯”è¾ƒçš„å…¸å‹çš„æ¡ˆä¾‹:TCP/IP VS OSI/RM</li><li>ä¸€ä¸ªå¥½çš„è½¯ä»¶è®¾è®¡è€…ï¼Œä¸€å®šæ˜¯ä¸€ä¸ªå¥½çš„äº§å“è®¾è®¡è€…</li><li>è½¯ä»¶çš„è®¾è®¡æœ€ç»ˆä¸€å®šè¦å½¢æˆé—­ç¯</li><li>è½¯ä»¶çš„è®¾è®¡æ˜¯åŸºäºç‰¹å®šçš„ä¸šåŠ¡ä½¿ç”¨åœºæ™¯çš„</li></ul></blockquote><p>ä»Šå¤©æ˜¯æ¯äº²èŠ‚ï¼Œç¥å¤©ä¸‹æ‰€æœ‰çš„æ¯äº²èŠ‚æ—¥å¿«ä¹!</p><h3><a aria-hidden="true" tabindex="-1" class="anchor enhancedAnchor_2cZh" id="è”ç³»æ–¹å¼"></a>è”ç³»æ–¹å¼<a aria-hidden="true" class="hash-link" href="#è”ç³»æ–¹å¼" title="Direct link to heading">#</a></h3><ul><li>æ¬¢è¿è®¢é˜…æˆ‘çš„å…¬ä¼—å·ï¼Œè¿™é‡Œä¸»è¦ä¼šå‘è¡¨äº›è½¯ä»¶å·¥ç¨‹ä¸Šçš„ä¸€äº›æƒ³æ³•åŠå®è·µ
<img alt="å¾®ä¿¡å…¬ä¼—å·" src="/assets/images/weixin-87aa5dc8406a7bddb435f74a81d745e9.jpg"></li></ul></section><footer class="row margin-vert--lg"><div class="col"><strong>Tags:</strong><a class="margin-horiz--sm" href="/blog/tags/design">design</a></div></footer></article><div><a href="https://github.com/facebook/docusaurus/edit/master/website/blog/blog/2020-05-09-software-design.md" target="_blank" rel="noreferrer noopener"><svg fill="currentColor" height="1.2em" width="1.2em" preserveAspectRatio="xMidYMid meet" viewBox="0 0 40 40" style="margin-right:0.3em;vertical-align:sub"><g><path d="m34.5 11.7l-3 3.1-6.3-6.3 3.1-3q0.5-0.5 1.2-0.5t1.1 0.5l3.9 3.9q0.5 0.4 0.5 1.1t-0.5 1.2z m-29.5 17.1l18.4-18.5 6.3 6.3-18.4 18.4h-6.3v-6.2z"></path></g></svg>Edit this page</a></div><div class="margin-vert--xl"><nav class="pagination-nav" aria-label="Blog post page navigation"><div class="pagination-nav__item"><a class="pagination-nav__link" href="/blog/build-monorepo"><div class="pagination-nav__sublabel">Newer Post</div><div class="pagination-nav__label">Â« æ„å»ºå•ä½“ä»“åº“</div></a></div><div class="pagination-nav__item pagination-nav__item--next"></div></nav></div></main><div class="col col--2"><div class="tableOfContents_3SO_ thin-scrollbar"><ul class="table-of-contents table-of-contents__left-border"><li><a href="#éª¨æ¶å·¥ç¨‹" class="table-of-contents__link">éª¨æ¶å·¥ç¨‹</a><ul><li><a href="#åè¯è§£é‡Š" class="table-of-contents__link">åè¯è§£é‡Š</a></li><li><a href="#ç›®å½•ç»“æ„" class="table-of-contents__link">ç›®å½•ç»“æ„</a></li><li><a href="#ç»“æ„å›¾" class="table-of-contents__link">ç»“æ„å›¾</a></li><li><a href="#ä¼˜åŒ–ç‰ˆæœ¬v1" class="table-of-contents__link">ä¼˜åŒ–ç‰ˆæœ¬V1</a></li><li><a href="#ä¼˜åŒ–ç‰ˆæœ¬v2" class="table-of-contents__link">ä¼˜åŒ–ç‰ˆæœ¬V2</a></li><li><a href="#ä¼˜åŒ–ç‰ˆæœ¬v3" class="table-of-contents__link">ä¼˜åŒ–ç‰ˆæœ¬V3</a></li><li><a href="#ç»“è¯­" class="table-of-contents__link">ç»“è¯­</a></li><li><a href="#è”ç³»æ–¹å¼" class="table-of-contents__link">è”ç³»æ–¹å¼</a></li></ul></li></ul></div></div></div></div></div><footer class="footer footer--dark"><div class="container"><div class="row footer__links"><div class="col footer__col"><h4 class="footer__title">Docs</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/docs/doc1">Style Guide</a></li><li class="footer__item"><a class="footer__link-item" href="/docs/doc1">Second Doc</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">Community</h4><ul class="footer__items"><li class="footer__item"><a href="https://stackoverflow.com/questions/tagged/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Stack Overflow</a></li><li class="footer__item"><a href="https://discordapp.com/invite/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Discord</a></li><li class="footer__item"><a href="https://twitter.com/docusaurus" target="_blank" rel="noopener noreferrer" class="footer__link-item">Twitter</a></li></ul></div><div class="col footer__col"><h4 class="footer__title">More</h4><ul class="footer__items"><li class="footer__item"><a class="footer__link-item" href="/blog">Blog</a></li><li class="footer__item"><a href="https://github.com/lokiworks/lokiworks.github.io" target="_blank" rel="noopener noreferrer" class="footer__link-item">GitHub</a></li></ul></div></div><div class="text--center"><div>Copyright Â© 2020 lokiworks, Inc. Built with Docusaurus.</div></div></div></footer></div>
<script src="/styles.57bf6eaa.js"></script>
<script src="/runtime~main.c34a3491.js"></script>
<script src="/main.a8d330d9.js"></script>
<script src="/common.fa44d2ed.js"></script>
<script src="/23.fac490eb.js"></script>
<script src="/ccc0114c.33b26800.js"></script>
<script src="/9849eb26.05ef0f7f.js"></script>
</body>
</html>